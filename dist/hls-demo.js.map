{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c21831f07d85b84eb10c","webpack:///./demo/index.js","webpack:///./tests/functional/streams.json"],"names":["streamsJson","require","$","document","ready","console","log","Object","keys","forEach","streamKey","stream","option","Option","description","url","append","change","val","loadStream","width","hide","toggle","windowSliding","click","enableStreaming","checked","autoRecoverError","updatePermalink","enableWorker","dumpfMP4","levelCapping","value","defaultAudioCodec","prop","Hls","version","hls","events","stats","tracks","fmp4Data","JSON","parse","getURLParam","undefined","video","volume","html","decodeURIComponent","hideCanvas","isSupported","destroy","bufferTimer","clearInterval","text","t0","performance","now","load","buffer","level","bitrate","recoverDecodingErrorDate","recoverSwapAudioCodecDate","debug","lowBufferWatchdogPeriod","highBufferWatchdogPeriod","maxBufferLength","maxMaxBufferLength","liveSyncDuration","liveInfiniteDuration","liveFlushBeforeStartOffset","maxBufferHole","forceKeyFrameOnDiscontinuity","loadSource","autoLevelCapping","attachMedia","on","Events","MEDIA_ATTACHED","bufferingIdx","push","time","type","MEDIA_DETACHED","FRAG_PARSING_INIT_SEGMENT","event","data","showCanvas","id","FRAG_PARSING_METADATA","LEVEL_SWITCHING","Math","round","levels","updateLevelInfo","MANIFEST_PARSED","name","start","end","length","trequest","latency","tfirst","tload","duration","refreshCanvas","levelNb","levelParsed","AUDIO_TRACKS_UPDATED","audioTracks","updateAudioTrackInfo","AUDIO_TRACK_SWITCHING","lastAudioTrackSwitchingIdx","AUDIO_TRACK_SWITCHED","LEVEL_LOADED","isLive","details","live","startSN","endSN","parsing","tparsed","parsingDuration","sumLevelParsingMs","levelParsingUs","AUDIO_TRACK_LOADED","FRAG_BUFFERED","frag","id2","sn","tbuffered","bw","total","size","pos","window","setInterval","checkBuffer","process","fragBuffered","fragMinLatency","min","fragMaxLatency","max","fragMinProcess","fragMaxProcess","fragMinKbps","fragMaxKbps","autoLevelCappingMin","autoLevelCappingMax","fragBufferedBytes","sumLatency","sumKbps","sumProcess","sumParsing","fraglastLatency","fragAvgLatency","fragLastProcess","fragAvgProcess","fragLastKbps","fragAvgKbps","fragparsingKbps","fragparsingMs","autoLevelCappingLast","LEVEL_SWITCHED","FRAG_CHANGED","tagList","autoLevel","levelStart","fragChangedAuto","autoLevelMin","autoLevelMax","levelLastAuto","autoLevelLast","autoLevelSwitch","sumAutoLevel","autoLevelAvg","fragChangedManual","manualLevelMin","manualLevelMax","manualLevelLast","manualLevelSwitch","FRAG_LOAD_EMERGENCY_ABORTED","fragLoadEmergencyAborted","FRAG_DECRYPTED","fragDecrypted","totalDecryptTime","fragAvgDecryptTime","tdecrypt","tstart","ERROR","warn","ErrorDetails","MANIFEST_LOAD_ERROR","context","response","code","err","MANIFEST_LOAD_TIMEOUT","MANIFEST_PARSING_ERROR","reason","LEVEL_LOAD_ERROR","LEVEL_LOAD_TIMEOUT","LEVEL_SWITCH_ERROR","FRAG_LOAD_ERROR","FRAG_LOAD_TIMEOUT","FRAG_LOOP_LOADING_ERROR","FRAG_DECRYPT_ERROR","FRAG_PARSING_ERROR","KEY_LOAD_ERROR","decryptdata","uri","KEY_LOAD_TIMEOUT","BUFFER_APPEND_ERROR","BUFFER_ADD_CODEC_ERROR","mimeType","message","BUFFER_APPENDING_ERROR","fatal","ErrorTypes","MEDIA_ERROR","handleMediaError","NETWORK_ERROR","fatalError","stringify","sortObject","BUFFER_CREATED","BUFFER_APPENDING","FPS_DROP","evt","currentDropped","currentDecoded","fpsDropEvent","fpsTotalDroppedFrames","totalDroppedFrames","addEventListener","handleVideoEvent","navigator","userAgent","toLowerCase","indexOf","lastSeekingIdx","lastStartPosition","lastDuration","target","videoWidth","videoHeight","currentTime","errorTxt","mediaError","currentTarget","error","MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_NETWORK","MEDIA_ERR_SRC_NOT_SUPPORTED","recoverMediaError","swapAudioCodec","timeRangesToString","r","i","v","canvas","ctx","getContext","buffered","bufferingDuration","fillStyle","fillRect","height","clientWidth","bufferLen","paused","bufEvents","bufEventLen","event0","event1","slopeBuf0","slopeBuf1","slopePos0","slopePos1","abs","pop","seekable","played","media","videoPlaybackQuality","getVideoPlaybackQuality","Function","droppedVideoFrames","corruptedVideoFrames","webkitDroppedFrameCount","x","obj","temp","key","sort","index","showMetrics","show","hideMetrics","getMetrics","json","jsonpacked","jsonpack","pack","btoa","copyMetricsToClipBoard","copyTextToClipboard","textArea","createElement","body","appendChild","select","successful","execCommand","msg","removeChild","goToMetrics","URL","substr","lastIndexOf","open","goToMetricsPermaLink","b64","minsecs","ts","m","floor","s","buffered_seek","clientX","offsetLeft","button_template","button_enabled","button_disabled","html1","autoLevelEnabled","html2","html3","html4","currentLevel","levelName","label","level2label","loadLevel","nextLevel","audioTrackId","audioTrack","len","sParam","defaultValue","sPageURL","location","search","substring","sURLVariables","split","sParameterName","hlsLink","encodeURIComponent","createfMP4","blob","Blob","arrayConcat","filename","Date","toISOString","saveAs","inputArray","totalLength","reduce","prev","cur","result","Uint8Array","offset","element","set"],"mappings":"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","file":"hls-demo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HlsDemo\"] = factory();\n\telse\n\t\troot[\"HlsDemo\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c21831f07d85b84eb10c","\nconst streamsJson = require('../tests/functional/streams.json');\n\n$(document).ready(function() {\n\n  console.log(streamsJson)\n\n  Object.keys(streamsJson).forEach((streamKey) => {\n    const stream = streamsJson[streamKey];\n    const option = new Option(stream.description, stream.url);\n    $('#streamSelect').append(option);\n  })\n\n  $('#streamSelect').change(function() {\n    $('#streamURL').val($('#streamSelect').val());\n    loadStream($('#streamURL').val());\n  });\n  $('#streamURL').change(function() {\n    loadStream($('#streamURL').val());\n  });\n  $('#videoSize').change(function() {\n    $('#video').width($('#videoSize').val());\n    $('#buffered_c').width($('#videoSize').val());\n  });\n  $('#PlaybackControl').hide();\n  $('#QualityLevelControl').hide();\n  $('#AudioTrackControl').hide();\n  $('#MetricsDisplay').hide();\n  $('#StatsDisplay').hide();\n  $('#metricsButtonWindow').toggle(windowSliding);\n  $('#metricsButtonFixed').toggle(!windowSliding);\n  $('#enableStreaming').click(function() {\n    enableStreaming = this.checked;\n    loadStream($('#streamURL').val());\n  });\n  $('#autoRecoverError').click(function() {\n    autoRecoverError = this.checked;\n    updatePermalink();\n  });\n  $('#enableWorker').click(function() {\n    enableWorker = this.checked;\n    updatePermalink();\n  });\n  $('#dumpfMP4').click(function() {\n    dumpfMP4 = this.checked;\n    updatePermalink();\n  });\n  $('#levelCapping').change(function() {\n    levelCapping = this.value;\n    updatePermalink();\n  });\n  $('#defaultAudioCodec').change(function() {\n    defaultAudioCodec = this.value;\n    updatePermalink();\n  });\n  $('#enableStreaming').prop( 'checked', enableStreaming );\n  $('#autoRecoverError').prop( 'checked', autoRecoverError );\n  $('#enableWorker').prop( 'checked', enableWorker );\n  $('#dumpfMP4').prop( 'checked', dumpfMP4 );\n  $('#levelCapping').val(levelCapping);\n  $('#defaultAudioCodec').val(defaultAudioCodec || 'undefined');\n  $('h2').append(' <a target=_blank href=https://github.com/video-dev/hls.js/releases/tag/v' + Hls.version + '>v' + Hls.version + '</a>');\n\n});\n\nvar hls, events, stats, tracks, fmp4Data,\n  enableStreaming = JSON.parse(getURLParam('enableStreaming', true));\nautoRecoverError = JSON.parse(getURLParam('autoRecoverError', true)),\nenableWorker = JSON.parse(getURLParam('enableWorker', true)),\nlevelCapping = JSON.parse(getURLParam('levelCapping', -1)),\ndefaultAudioCodec = getURLParam('defaultAudioCodec', undefined),\ndumpfMP4 = getURLParam('dumpfMP4', false);\nlet video = $('#video')[0];\nvideo.volume = 0.05;\n$('#currentVersion').html('Hls version:' + Hls.version);\n\nloadStream(decodeURIComponent(getURLParam('src', 'https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8')));\n\nfunction loadStream(url) {\n  hideCanvas();\n  if(Hls.isSupported()) {\n    if(hls) {\n      hls.destroy();\n      if(hls.bufferTimer) {\n        clearInterval(hls.bufferTimer);\n        hls.bufferTimer = undefined;\n      }\n      hls = null;\n    }\n\n    $('#streamURL').val(url);\n    updatePermalink();\n    if(!enableStreaming) {\n      $('#HlsStatus').text('Streaming disabled');\n      return;\n    }\n\n    $('#HlsStatus').text('loading ' + url);\n    events = {\n      url    : url,\n      t0     : performance.now(),\n      load   : [],\n      buffer : [],\n      video  : [],\n      level  : [],\n      bitrate: []\n    };\n    recoverDecodingErrorDate = recoverSwapAudioCodecDate = null;\n    fmp4Data = {\n      'audio': [],\n      'video': []\n    };\n    hls = new Hls({\n      debug            : true,\n      enableWorker     : enableWorker,\n      defaultAudioCodec: 'mp4a.40.2',\n\t\t\tlowBufferWatchdogPeriod: 5,\n\t\t\thighBufferWatchdogPeriod: 10,\n\t\t\tmaxBufferLength: 30,\n\t\t\tmaxMaxBufferLength: 50,\n\t\t\tliveSyncDuration: 27,\n\t\t\tliveInfiniteDuration: true,\n\t\t\tliveFlushBeforeStartOffset: true,\n\t\t\tmaxBufferHole: 0.25,\n\t\t\tforceKeyFrameOnDiscontinuity: true\n    });\n    $('#HlsStatus').text('loading manifest and attaching video element...');\n    hls.loadSource(url);\n    hls.autoLevelCapping = levelCapping;\n    hls.attachMedia(video);\n    hls.on(Hls.Events.MEDIA_ATTACHED, function() {\n      $('#HlsStatus').text('MediaSource attached...');\n      bufferingIdx = -1;\n      events.video.push({\n        time: performance.now() - events.t0,\n        type: 'Media attached'\n      });\n    });\n    hls.on(Hls.Events.MEDIA_DETACHED, function() {\n      $('#HlsStatus').text('MediaSource detached...');\n      bufferingIdx = -1;\n      tracks = [];\n      events.video.push({\n        time: performance.now() - events.t0,\n        type: 'Media detached'\n      });\n    });\n    hls.on(Hls.Events.FRAG_PARSING_INIT_SEGMENT, function(event, data) {\n      showCanvas();\n      var event = {\n        time: performance.now() - events.t0,\n        type: data.id + ' init segment'\n      };\n      events.video.push(event);\n    });\n    hls.on(Hls.Events.FRAG_PARSING_METADATA, function(event, data) {\n      //console.log(\"Id3 samples \", data.samples);\n    });\n    hls.on(Hls.Events.LEVEL_SWITCHING, function(event, data) {\n      events.level.push({\n        time   : performance.now() - events.t0,\n        id     : data.level,\n        bitrate: Math.round(hls.levels[data.level].bitrate/1000)\n      });\n      updateLevelInfo();\n    });\n    hls.on(Hls.Events.MANIFEST_PARSED, function(event, data) {\n      var event = {\n        type    : 'manifest',\n        name    : '',\n        start   : 0,\n        end     : data.levels.length,\n        time    : data.stats.trequest - events.t0,\n        latency : data.stats.tfirst - data.stats.trequest,\n        load    : data.stats.tload - data.stats.tfirst,\n        duration: data.stats.tload - data.stats.tfirst,\n      };\n      events.load.push(event);\n      refreshCanvas();\n    });\n    hls.on(Hls.Events.MANIFEST_PARSED, function(event, data) {\n      $('#HlsStatus').text('manifest successfully loaded,' + hls.levels.length + ' levels found');\n      stats = {\n        levelNb    : data.levels.length,\n        levelParsed: 0\n      };\n      updateLevelInfo();\n    });\n    hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, function(event, data) {\n      $('#HlsStatus').text(data.audioTracks.length + ' audio tracks found');\n      updateAudioTrackInfo();\n    });\n    hls.on(Hls.Events.AUDIO_TRACK_SWITCHING, function(event, data) {\n      updateAudioTrackInfo();\n      var event = {\n        time: performance.now() - events.t0,\n        type: 'audio switching',\n        name: '@' + data.id\n      };\n      events.video.push(event);\n      lastAudioTrackSwitchingIdx = events.video.length-1;\n    });\n    hls.on(Hls.Events.AUDIO_TRACK_SWITCHED, function(event, data) {\n      updateAudioTrackInfo();\n      var event = {\n        time: performance.now() - events.t0,\n        type: 'audio switched',\n        name: '@' + data.id\n      };\n      if (lastAudioTrackSwitchingIdx !== undefined) {\n        events.video[lastAudioTrackSwitchingIdx].duration = event.time - events.video[lastAudioTrackSwitchingIdx].time;\n        lastAudioTrackSwitchingIdx = undefined;\n      }\n      events.video.push(event);\n    });\n    hls.on(Hls.Events.LEVEL_LOADED, function(event, data) {\n      events.isLive = data.details.live;\n      var event = {\n        type    : 'level',\n        id      : data.level,\n        start   : data.details.startSN,\n        end     : data.details.endSN,\n        time    : data.stats.trequest - events.t0,\n        latency : data.stats.tfirst - data.stats.trequest,\n        load    : data.stats.tload - data.stats.tfirst,\n        parsing : data.stats.tparsed - data.stats.tload,\n        duration: data.stats.tload - data.stats.tfirst\n      };\n      const parsingDuration = data.stats.tparsed - data.stats.tload;\n      if (stats.levelParsed)\n        this.sumLevelParsingMs += parsingDuration;\n      else\n        this.sumLevelParsingMs = parsingDuration;\n\n      stats.levelParsed++;\n      stats.levelParsingUs = Math.round(1000*this.sumLevelParsingMs / stats.levelParsed);\n      console.log('parsing level duration :' + stats.levelParsingUs + 'us,count:' + stats.levelParsed);\n      events.load.push(event);\n      refreshCanvas();\n    });\n    hls.on(Hls.Events.AUDIO_TRACK_LOADED, function(event, data) {\n      events.isLive = data.details.live;\n      var event = {\n        type    : 'audio track',\n        id      : data.id,\n        start   : data.details.startSN,\n        end     : data.details.endSN,\n        time    : data.stats.trequest - events.t0,\n        latency : data.stats.tfirst - data.stats.trequest,\n        load    : data.stats.tload - data.stats.tfirst,\n        parsing : data.stats.tparsed - data.stats.tload,\n        duration: data.stats.tload - data.stats.tfirst\n      };\n      events.load.push(event);\n      refreshCanvas();\n    });\n    hls.on(Hls.Events.FRAG_BUFFERED, function(event, data) {\n      var event = {\n        type    : data.frag.type + ' fragment',\n        id      : data.frag.level,\n        id2     : data.frag.sn,\n        time    : data.stats.trequest - events.t0,\n        latency : data.stats.tfirst - data.stats.trequest,\n        load    : data.stats.tload - data.stats.tfirst,\n        parsing : data.stats.tparsed - data.stats.tload,\n        buffer  : data.stats.tbuffered - data.stats.tparsed,\n        duration: data.stats.tbuffered - data.stats.tfirst,\n        bw      : Math.round(8*data.stats.total/(data.stats.tbuffered - data.stats.trequest)),\n        size    : data.stats.total\n      };\n      events.load.push(event);\n      events.bitrate.push({\n        time    : performance.now() - events.t0,\n        bitrate : event.bw,\n        duration: data.frag.duration,\n        level   : event.id\n      });\n      if(hls.bufferTimer === undefined) {\n        events.buffer.push({\n          time  : 0,\n          buffer: 0,\n          pos   : 0\n        });\n        hls.bufferTimer = window.setInterval(checkBuffer, 100);\n      }\n      refreshCanvas();\n      updateLevelInfo();\n\n      let latency = data.stats.tfirst - data.stats.trequest,\n        parsing = data.stats.tparsed - data.stats.tload,\n        process = data.stats.tbuffered - data.stats.trequest,\n        bitrate = Math.round(8 * data.stats.length / (data.stats.tbuffered - data.stats.tfirst));\n      if (stats.fragBuffered) {\n        stats.fragMinLatency = Math.min(stats.fragMinLatency, latency);\n        stats.fragMaxLatency = Math.max(stats.fragMaxLatency, latency);\n        stats.fragMinProcess = Math.min(stats.fragMinProcess, process);\n        stats.fragMaxProcess = Math.max(stats.fragMaxProcess, process);\n        stats.fragMinKbps = Math.min(stats.fragMinKbps, bitrate);\n        stats.fragMaxKbps = Math.max(stats.fragMaxKbps, bitrate);\n        stats.autoLevelCappingMin = Math.min(stats.autoLevelCappingMin, hls.autoLevelCapping);\n        stats.autoLevelCappingMax = Math.max(stats.autoLevelCappingMax, hls.autoLevelCapping);\n        stats.fragBuffered++;\n      } else {\n        stats.fragMinLatency = stats.fragMaxLatency = latency;\n        stats.fragMinProcess = stats.fragMaxProcess = process;\n        stats.fragMinKbps = stats.fragMaxKbps = bitrate;\n        stats.fragBuffered = 1;\n        stats.fragBufferedBytes = 0;\n        stats.autoLevelCappingMin = stats.autoLevelCappingMax = hls.autoLevelCapping;\n        this.sumLatency = 0;\n        this.sumKbps = 0;\n        this.sumProcess = 0;\n        this.sumParsing = 0;\n      }\n      stats.fraglastLatency = latency;\n      this.sumLatency += latency;\n      stats.fragAvgLatency = Math.round(this.sumLatency / stats.fragBuffered);\n      stats.fragLastProcess = process;\n      this.sumProcess += process;\n      this.sumParsing += parsing;\n      stats.fragAvgProcess = Math.round(this.sumProcess / stats.fragBuffered);\n      stats.fragLastKbps = bitrate;\n      this.sumKbps += bitrate;\n      stats.fragAvgKbps = Math.round(this.sumKbps / stats.fragBuffered);\n      stats.fragBufferedBytes += data.stats.total;\n      stats.fragparsingKbps = Math.round(8*stats.fragBufferedBytes / this.sumParsing);\n      stats.fragparsingMs = Math.round(this.sumParsing);\n      stats.autoLevelCappingLast = hls.autoLevelCapping;\n    });\n    hls.on(Hls.Events.LEVEL_SWITCHED, function(event, data) {\n      var event = {\n        time: performance.now() - events.t0,\n        type: 'level switched',\n        name: data.level\n      };\n      events.video.push(event);\n      refreshCanvas();\n      updateLevelInfo();\n    });\n    hls.on(Hls.Events.FRAG_CHANGED, function(event, data) {\n      var event = {\n        time: performance.now() - events.t0,\n        type: 'frag changed',\n        name: data.frag.sn + ' @ ' + data.frag.level\n      };\n      events.video.push(event);\n      refreshCanvas();\n      updateLevelInfo();\n      stats.tagList = data.frag.tagList;\n\n      let level = data.frag.level, autoLevel = data.frag.autoLevel;\n      if (stats.levelStart === undefined)\n        stats.levelStart = level;\n\n      if (autoLevel) {\n        if (stats.fragChangedAuto) {\n          stats.autoLevelMin = Math.min(stats.autoLevelMin, level);\n          stats.autoLevelMax = Math.max(stats.autoLevelMax, level);\n          stats.fragChangedAuto++;\n          if (this.levelLastAuto && level !== stats.autoLevelLast)\n            stats.autoLevelSwitch++;\n\n        } else {\n          stats.autoLevelMin = stats.autoLevelMax = level;\n          stats.autoLevelSwitch = 0;\n          stats.fragChangedAuto = 1;\n          this.sumAutoLevel = 0;\n        }\n        this.sumAutoLevel += level;\n        stats.autoLevelAvg = Math.round(1000 * this.sumAutoLevel / stats.fragChangedAuto) / 1000;\n        stats.autoLevelLast = level;\n      } else {\n        if (stats.fragChangedManual) {\n          stats.manualLevelMin = Math.min(stats.manualLevelMin, level);\n          stats.manualLevelMax = Math.max(stats.manualLevelMax, level);\n          stats.fragChangedManual++;\n          if (!this.levelLastAuto && level !== stats.manualLevelLast)\n            stats.manualLevelSwitch++;\n\n        } else {\n          stats.manualLevelMin = stats.manualLevelMax = level;\n          stats.manualLevelSwitch = 0;\n          stats.fragChangedManual = 1;\n        }\n        stats.manualLevelLast = level;\n      }\n      this.levelLastAuto = autoLevel;\n    });\n\n    hls.on(Hls.Events.FRAG_LOAD_EMERGENCY_ABORTED, function(event, data) {\n      if (stats) {\n        if (stats.fragLoadEmergencyAborted === undefined)\n          stats.fragLoadEmergencyAborted = 1;\n        else\n          stats.fragLoadEmergencyAborted++;\n\n      }\n    });\n\n    hls.on(Hls.Events.FRAG_DECRYPTED, function(event, data) {\n      if (!stats.fragDecrypted) {\n        stats.fragDecrypted = 0;\n        this.totalDecryptTime = 0;\n        stats.fragAvgDecryptTime = 0;\n      }\n      stats.fragDecrypted++;\n      this.totalDecryptTime += data.stats.tdecrypt - data.stats.tstart;\n      stats.fragAvgDecryptTime = this.totalDecryptTime / stats.fragDecrypted;\n    });\n\n    hls.on(Hls.Events.ERROR, function(event, data) {\n      console.warn(data);\n      switch(data.details) {\n      case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:\n        try {\n          $('#HlsStatus').html('cannot Load <a href=\"' + data.context.url + '\">' + url + '</a><br>HTTP response code:' + data.response.code + ' <br>' + data.response.text);\n          if(data.response.code === 0)\n            $('#HlsStatus').append('this might be a CORS issue, consider installing <a href=\"https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi\">Allow-Control-Allow-Origin</a> Chrome Extension');\n\n        } catch(err) {\n          $('#HlsStatus').html('cannot Load <a href=\"' + data.context.url + '\">' + url + '</a><br>Reason:Load ' + data.response.text);\n        }\n        break;\n      case Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:\n        $('#HlsStatus').text('timeout while loading manifest');\n        break;\n      case Hls.ErrorDetails.MANIFEST_PARSING_ERROR:\n        $('#HlsStatus').text('error while parsing manifest:' + data.reason);\n        break;\n      case Hls.ErrorDetails.LEVEL_LOAD_ERROR:\n        $('#HlsStatus').text('error while loading level playlist');\n        break;\n      case Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT:\n        $('#HlsStatus').text('timeout while loading level playlist');\n        break;\n      case Hls.ErrorDetails.LEVEL_SWITCH_ERROR:\n        $('#HlsStatus').text('error while trying to switch to level ' + data.level);\n        break;\n      case Hls.ErrorDetails.FRAG_LOAD_ERROR:\n        $('#HlsStatus').text('error while loading fragment ' + data.frag.url);\n        break;\n      case Hls.ErrorDetails.FRAG_LOAD_TIMEOUT:\n        $('#HlsStatus').text('timeout while loading fragment ' + data.frag.url);\n        break;\n      case Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR:\n        $('#HlsStatus').text('Frag Loop Loading Error');\n        break;\n      case Hls.ErrorDetails.FRAG_DECRYPT_ERROR:\n        $('#HlsStatus').text('Decrypting Error:' + data.reason);\n        break;\n      case Hls.ErrorDetails.FRAG_PARSING_ERROR:\n        $('#HlsStatus').text('Parsing Error:' + data.reason);\n        break;\n      case Hls.ErrorDetails.KEY_LOAD_ERROR:\n        $('#HlsStatus').text('error while loading key ' + data.frag.decryptdata.uri);\n        break;\n      case Hls.ErrorDetails.KEY_LOAD_TIMEOUT:\n        $('#HlsStatus').text('timeout while loading key ' + data.frag.decryptdata.uri);\n        break;\n      case Hls.ErrorDetails.BUFFER_APPEND_ERROR:\n        $('#HlsStatus').text('Buffer Append Error');\n        break;\n      case Hls.ErrorDetails.BUFFER_ADD_CODEC_ERROR:\n        $('#HlsStatus').text('Buffer Add Codec Error for ' + data.mimeType + ':' + data.err.message);\n        break;\n      case Hls.ErrorDetails.BUFFER_APPENDING_ERROR:\n        $('#HlsStatus').text('Buffer Appending Error');\n        break;\n      default:\n        break;\n      }\n      if(data.fatal) {\n        console.log('fatal error :' + data.details);\n        switch(data.type) {\n        case Hls.ErrorTypes.MEDIA_ERROR:\n          handleMediaError();\n          break;\n        case Hls.ErrorTypes.NETWORK_ERROR:\n          $('#HlsStatus').append(',network error ...');\n          break;\n        default:\n          $('#HlsStatus').append(', unrecoverable error');\n          hls.destroy();\n          break;\n        }\n        console.log($('#HlsStatus').text());\n      }\n      if(!stats) {\n        stats = {\n        };\n      }\n      // track all errors independently\n      if (stats[data.details] === undefined)\n        stats[data.details] = 1;\n      else\n        stats[data.details] += 1;\n\n      // track fatal error\n      if (data.fatal) {\n        if (stats.fatalError === undefined)\n          stats.fatalError = 1;\n        else\n          stats.fatalError += 1;\n\n      }\n      $('#HlsStats').text(JSON.stringify(sortObject(stats), null, '\\t'));\n    });\n\n    hls.on(Hls.Events.BUFFER_CREATED, function(event, data) {\n      tracks = data.tracks;\n    });\n\n    hls.on(Hls.Events.BUFFER_APPENDING, function(event, data) {\n      if (dumpfMP4)\n        fmp4Data[data.type].push(data.data);\n\n    });\n\n    hls.on(Hls.Events.FPS_DROP, function(event, data) {\n      let evt = {\n        time: performance.now() - events.t0,\n        type: 'frame drop',\n        name: data.currentDropped + '/' + data.currentDecoded\n      };\n      events.video.push(evt);\n      if (stats) {\n        if (stats.fpsDropEvent === undefined)\n          stats.fpsDropEvent = 1;\n        else\n          stats.fpsDropEvent++;\n\n        stats.fpsTotalDroppedFrames = data.totalDroppedFrames;\n      }\n    });\n    video.addEventListener('resize', handleVideoEvent);\n    video.addEventListener('seeking', handleVideoEvent);\n    video.addEventListener('seeked', handleVideoEvent);\n    video.addEventListener('pause', handleVideoEvent);\n    video.addEventListener('play', handleVideoEvent);\n    video.addEventListener('canplay', handleVideoEvent);\n    video.addEventListener('canplaythrough', handleVideoEvent);\n    video.addEventListener('ended', handleVideoEvent);\n    video.addEventListener('playing', handleVideoEvent);\n    video.addEventListener('error', handleVideoEvent);\n    video.addEventListener('loadedmetadata', handleVideoEvent);\n    video.addEventListener('loadeddata', handleVideoEvent);\n    video.addEventListener('durationchange', handleVideoEvent);\n  } else {\n    if(navigator.userAgent.toLowerCase().indexOf('firefox') !== -1)\n      $('#HlsStatus').text('you are using Firefox, it looks like MediaSource is not enabled,<br>please ensure the following keys are set appropriately in <b>about:config</b><br>media.mediasource.enabled=true<br>media.mediasource.mp4.enabled=true<br><b>media.mediasource.whitelist=false</b>');\n    else\n      $('#HlsStatus').text('your Browser does not support MediaSourceExtension / MP4 mediasource');\n\n  }\n}\n\n\nlet lastSeekingIdx, lastStartPosition, lastDuration, lastAudioTrackSwitchingIdx;\nfunction handleVideoEvent(evt) {\n  let data = '';\n  switch(evt.type) {\n  case 'durationchange':\n    if(evt.target.duration - lastDuration <= 0.5) {\n      // some browsers reports several duration change events with almost the same value ... avoid spamming video events\n      return;\n    }\n    lastDuration = evt.target.duration;\n    data = Math.round(evt.target.duration*1000);\n    break;\n  case 'resize':\n    data = evt.target.videoWidth + '/' + evt.target.videoHeight;\n    break;\n  case 'loadedmetadata':\n    //   data = 'duration:' + evt.target.duration + '/videoWidth:' + evt.target.videoWidth + '/videoHeight:' + evt.target.videoHeight;\n    //  break;\n  case 'loadeddata':\n  case 'canplay':\n  case 'canplaythrough':\n  case 'ended':\n  case 'seeking':\n  case 'seeked':\n  case 'play':\n  case 'playing':\n    lastStartPosition = evt.target.currentTime;\n  case 'pause':\n  case 'waiting':\n  case 'stalled':\n  case 'error':\n    data = Math.round(evt.target.currentTime*1000);\n    if(evt.type === 'error') {\n      let errorTxt, mediaError=evt.currentTarget.error;\n      switch(mediaError.code) {\n      case mediaError.MEDIA_ERR_ABORTED:\n        errorTxt = 'You aborted the video playback';\n        break;\n      case mediaError.MEDIA_ERR_DECODE:\n        errorTxt = 'The video playback was aborted due to a corruption problem or because the video used features your browser did not support';\n        handleMediaError();\n        break;\n      case mediaError.MEDIA_ERR_NETWORK:\n        errorTxt = 'A network error caused the video download to fail part-way';\n        break;\n      case mediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:\n        errorTxt = 'The video could not be loaded, either because the server or network failed or because the format is not supported';\n        break;\n      }\n      if (mediaError.message)\n        errorTxt += ' - ' + mediaError.message;\n\n      $('#HlsStatus').text(errorTxt);\n      console.error(errorTxt);\n    }\n    break;\n    // case 'progress':\n    //   data = 'currentTime:' + evt.target.currentTime + ',bufferRange:[' + this.video.buffered.start(0) + ',' + this.video.buffered.end(0) + ']';\n    //   break;\n  default:\n    break;\n  }\n  let event = {\n    time: performance.now() - events.t0,\n    type: evt.type,\n    name: data\n  };\n  events.video.push(event);\n  if(evt.type === 'seeking')\n    lastSeekingIdx = events.video.length-1;\n\n  if(evt.type === 'seeked')\n    events.video[lastSeekingIdx].duration = event.time - events.video[lastSeekingIdx].time;\n\n}\n\n\nlet recoverDecodingErrorDate, recoverSwapAudioCodecDate;\nfunction handleMediaError() {\n  if(autoRecoverError) {\n    let now = performance.now();\n    if(!recoverDecodingErrorDate || (now - recoverDecodingErrorDate) > 3000) {\n      recoverDecodingErrorDate = performance.now();\n      $('#HlsStatus').append(',try to recover media Error ...');\n      hls.recoverMediaError();\n    } else {\n      if(!recoverSwapAudioCodecDate || (now - recoverSwapAudioCodecDate) > 3000) {\n        recoverSwapAudioCodecDate = performance.now();\n        $('#HlsStatus').append(',try to swap Audio Codec and recover media Error ...');\n        hls.swapAudioCodec();\n        hls.recoverMediaError();\n      } else {\n        $('#HlsStatus').append(',cannot recover, last media error recovery failed ...');\n      }\n    }\n  }\n}\n\n\nfunction timeRangesToString(r) {\n  let log = '';\n  for (let i=0; i<r.length; i++)\n    log += '[' + r.start(i) + ',' + r.end(i) + ']';\n\n  return log;\n}\n\nvar bufferingIdx = -1;\n\nfunction checkBuffer() {\n  let v = $('#video')[0];\n  let canvas = $('#buffered_c')[0];\n  let ctx = canvas.getContext('2d');\n  let r = v.buffered;\n  let bufferingDuration;\n  ctx.fillStyle = 'black';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  ctx.fillStyle = 'gray';\n  if (r) {\n    if(!canvas.width || canvas.width !== v.clientWidth)\n      canvas.width = v.clientWidth;\n\n    var pos = v.currentTime, bufferLen;\n    for (var i=0, bufferLen=0; i<r.length; i++) {\n      let start = r.start(i)/v.duration * canvas.width;\n      let end = r.end(i)/v.duration * canvas.width;\n      ctx.fillRect(start, 3, Math.max(2, end-start), 10);\n      if(pos >= r.start(i) && pos < r.end(i)) {\n        // play position is inside this buffer TimeRange, retrieve end of buffer position and buffer length\n        bufferLen = r.end(i) - pos;\n      }\n    }\n    // check if we are in buffering / or playback ended state\n    if(bufferLen <= 0.1 && v.paused === false && (pos-lastStartPosition) > 0.5) {\n      // don't create buffering event if we are at the end of the playlist, don't report ended for live playlist\n      if(lastDuration -pos <= 0.5  && events.isLive === false) {\n      } else {\n        // we are not at the end of the playlist ... real buffering\n        if(bufferingIdx !== -1) {\n          bufferingDuration = performance.now() - events.t0 - events.video[bufferingIdx].time;\n          events.video[bufferingIdx].duration = bufferingDuration;\n          events.video[bufferingIdx].name = bufferingDuration;\n        } else {\n          events.video.push({\n            type: 'buffering',\n            time: performance.now() - events.t0\n          });\n          // we are in buffering state\n          bufferingIdx = events.video.length-1;\n        }\n      }\n    }\n\n    if(bufferLen > 0.1 && bufferingIdx !=-1) {\n      bufferingDuration = performance.now() - events.t0 - events.video[bufferingIdx].time;\n      events.video[bufferingIdx].duration = bufferingDuration;\n      events.video[bufferingIdx].name = bufferingDuration;\n      // we are out of buffering state\n      bufferingIdx = -1;\n    }\n\n    // update buffer/position for current Time\n    let event = {\n      time  : performance.now() - events.t0,\n      buffer: Math.round(bufferLen*1000),\n      pos   : Math.round(pos*1000)\n    };\n    let bufEvents = events.buffer, bufEventLen = bufEvents.length;\n    if(bufEventLen > 1) {\n      let event0 = bufEvents[bufEventLen-2], event1 = bufEvents[bufEventLen-1];\n      let slopeBuf0 = (event0.buffer - event1.buffer)/(event0.time-event1.time);\n      let slopeBuf1 = (event1.buffer - event.buffer)/(event1.time-event.time);\n\n      let slopePos0 = (event0.pos - event1.pos)/(event0.time-event1.time);\n      let slopePos1 = (event1.pos - event.pos)/(event1.time-event.time);\n      // compute slopes. if less than 30% difference, remove event1\n      if((slopeBuf0 === slopeBuf1 || Math.abs(slopeBuf0/slopeBuf1 -1) <= 0.3) &&\n           (slopePos0 === slopePos1 || Math.abs(slopePos0/slopePos1 -1) <= 0.3))\n        bufEvents.pop();\n\n    }\n    events.buffer.push(event);\n    refreshCanvas();\n\n    let log = 'Duration:'\n              + v.duration + '<br>'\n              + 'Buffered:'\n              + timeRangesToString(v.buffered) + '<br>'\n              + 'Seekable:'\n              + timeRangesToString(v.seekable) + '<br>'\n              + 'Played:'\n              + timeRangesToString(v.played) + '<br>';\n\n    if (hls.media) {\n      for(let type in tracks)\n        log += type + ' Buffered:' + timeRangesToString(tracks[type].buffer.buffered) + '<br>';\n\n\n      let videoPlaybackQuality = v.getVideoPlaybackQuality;\n      if(videoPlaybackQuality && typeof (videoPlaybackQuality) === typeof (Function)) {\n        log+='Dropped Frames:'+ v.getVideoPlaybackQuality().droppedVideoFrames + '<br>';\n        log+='Corrupted Frames:'+ v.getVideoPlaybackQuality().corruptedVideoFrames + '<br>';\n      } else if(v.webkitDroppedFrameCount) {\n        log+='Dropped Frames:'+ v.webkitDroppedFrameCount + '<br>';\n      }\n    }\n    $('#buffered_log').html(log);\n    $('#HlsStats').text(JSON.stringify(sortObject(stats), null, '\\t'));\n    ctx.fillStyle = 'blue';\n    let x = v.currentTime / v.duration * canvas.width;\n    ctx.fillRect(x, 0, 2, 15);\n  }\n\n}\n\nfunction sortObject(obj) {\n  if(typeof obj !== 'object')\n    return obj;\n  let temp = {\n  };\n  let keys = [];\n  for(let key in obj)\n    keys.push(key);\n  keys.sort();\n  for(let index in keys)\n    temp[keys[index]] = sortObject(obj[keys[index]]);\n  return temp;\n}\n\n\nfunction showCanvas()  {\n  showMetrics();\n  $('#buffered_log').show();\n  $('#buffered_c').show();\n}\n\nfunction hideCanvas()  {\n  hideMetrics();\n  $('#buffered_log').hide();\n  $('#buffered_c').hide();\n}\n\nfunction getMetrics() {\n  let json = JSON.stringify(events);\n  let jsonpacked = jsonpack.pack(json);\n  console.log('packing JSON from ' + json.length + ' to ' + jsonpacked.length + ' bytes');\n  return btoa(jsonpacked);\n}\n\nfunction copyMetricsToClipBoard() {\n  copyTextToClipboard(getMetrics());\n}\n\nfunction copyTextToClipboard(text) {\n  let textArea = document.createElement('textarea');\n  textArea.value = text;\n  document.body.appendChild(textArea);\n  textArea.select();\n  try {\n    let successful = document.execCommand('copy');\n    let msg = successful ? 'successful' : 'unsuccessful';\n    console.log('Copying text command was ' + msg);\n  } catch (err) {\n    console.log('Oops, unable to copy');\n  }\n  document.body.removeChild(textArea);\n}\n\nfunction goToMetrics() {\n  let url = document.URL;\n  url = url.substr(0, url.lastIndexOf('/')+1) + 'metrics.html';\n  console.log(url);\n  window.open(url, '_blank');\n}\n\nfunction goToMetricsPermaLink() {\n  let url = document.URL;\n  let b64 = getMetrics();\n  url = url.substr(0, url.lastIndexOf('/')+1) + 'metrics.html#data=' + b64;\n  console.log(url);\n  window.open(url, '_blank');\n}\n\nfunction minsecs(ts) {\n  let m = Math.floor(Math.floor(ts % 3600) / 60);\n  let s = Math.floor(ts % 60);\n  return m + ':' + (s < 10 ? '0' : '') + s;\n}\n\nfunction buffered_seek(event) {\n  let canvas = $('#buffered_c')[0];\n  let v = $('#video')[0];\n  let target = (event.clientX - canvas.offsetLeft) / canvas.width * v.duration;\n  v.currentTime = target;\n}\n\nfunction updateLevelInfo() {\n\n  if (!hls.levels)\n    return;\n\n\n  let button_template = '<button type=\"button\" class=\"btn btn-sm ';\n  let button_enabled  = 'btn-primary\" ';\n  let button_disabled = 'btn-success\" ';\n\n  let html1 = button_template;\n  if(hls.autoLevelEnabled)\n    html1 += button_enabled;\n  else\n    html1 += button_disabled;\n\n  html1 += 'onclick=\"hls.currentLevel=-1\">auto</button>';\n\n\n  let html2 = button_template;\n  if(hls.autoLevelEnabled)\n    html2 += button_enabled;\n  else\n    html2 += button_disabled;\n\n  html2 += 'onclick=\"hls.loadLevel=-1\">auto</button>';\n\n  let html3 = button_template;\n  if(hls.autoLevelCapping === -1)\n    html3 += button_enabled;\n  else\n    html3 += button_disabled;\n\n  html3 += 'onclick=\"levelCapping=hls.autoLevelCapping=-1;updateLevelInfo();updatePermalink();\">auto</button>';\n\n  let html4 = button_template;\n  if(hls.autoLevelEnabled)\n    html4 += button_enabled;\n  else\n    html4 += button_disabled;\n\n  html4 += 'onclick=\"hls.nextLevel=-1\">auto</button>';\n\n  for (let i=0; i < hls.levels.length; i++) {\n    html1 += button_template;\n    if(hls.currentLevel === i)\n      html1 += button_enabled;\n    else\n      html1 += button_disabled;\n\n    let levelName = i, label = level2label(i);\n    if(label)\n      levelName += '(' + level2label(i) + ')';\n\n    html1 += 'onclick=\"hls.currentLevel=' + i + '\">' + levelName + '</button>';\n\n    html2 += button_template;\n    if(hls.loadLevel === i)\n      html2 += button_enabled;\n    else\n      html2 += button_disabled;\n\n    html2 += 'onclick=\"hls.loadLevel=' + i + '\">' + levelName + '</button>';\n\n    html3 += button_template;\n    if(hls.autoLevelCapping === i)\n      html3 += button_enabled;\n    else\n      html3 += button_disabled;\n\n    html3 += 'onclick=\"levelCapping=hls.autoLevelCapping=' + i + ';updateLevelInfo();updatePermalink();\">' + levelName + '</button>';\n\n    html4 += button_template;\n    if(hls.nextLevel === i)\n      html4 += button_enabled;\n    else\n      html4 += button_disabled;\n\n    html4 += 'onclick=\"hls.nextLevel=' + i + '\">' + levelName + '</button>';\n  }\n  let v = $('#video')[0];\n  if(v.videoWidth)\n    $('#currentResolution').html('video resolution:' + v.videoWidth + 'x' + v.videoHeight);\n\n  if($('#currentLevelControl').html() != html1)\n    $('#currentLevelControl').html(html1);\n\n\n  if($('#loadLevelControl').html() != html2)\n    $('#loadLevelControl').html(html2);\n\n\n  if($('#levelCappingControl').html() != html3)\n    $('#levelCappingControl').html(html3);\n\n\n  if($('#nextLevelControl').html() != html4)\n    $('#nextLevelControl').html(html4);\n\n}\n\nfunction updateAudioTrackInfo() {\n  let button_template = '<button type=\"button\" class=\"btn btn-sm ';\n  let button_enabled  = 'btn-primary\" ';\n  let button_disabled = 'btn-success\" ';\n  let html1 = '';\n  let audioTrackId = hls.audioTrack, len = hls.audioTracks.length;\n\n  for (let i=0; i < len; i++) {\n    html1 += button_template;\n    if(audioTrackId === i)\n      html1 += button_enabled;\n    else\n      html1 += button_disabled;\n\n    html1 += 'onclick=\"hls.audioTrack=' + i + '\">' + hls.audioTracks[i].name + '</button>';\n  }\n  $('#audioTrackControl').html(html1);\n}\n\n\nfunction level2label(index) {\n  if(hls && hls.levels.length-1 >= index) {\n    let level = hls.levels[index];\n    if (level.name) {\n      return level.name;\n    } else {\n      if (level.height) {\n        return(level.height + 'p / ' + Math.round(level.bitrate / 1024) + 'kb');\n      } else {\n        if(level.bitrate)\n          return(Math.round(level.bitrate / 1024) + 'kb');\n        else\n          return null;\n\n      }\n    }\n  }\n}\n\nfunction getURLParam(sParam, defaultValue) {\n  let sPageURL = window.location.search.substring(1);\n  let sURLVariables = sPageURL.split('&');\n  for (let i = 0; i < sURLVariables.length; i++) {\n    let sParameterName = sURLVariables[i].split('=');\n    if (sParameterName[0] == sParam)\n      return 'undefined' == sParameterName[1] ? undefined : 'false' == sParameterName[1] ? false : sParameterName[1];\n\n  }\n  return defaultValue;\n}\n\nfunction updatePermalink() {\n  let url = $('#streamURL').val();\n  let hlsLink = document.URL.split('?')[0] +  '?src=' + encodeURIComponent(url) +\n                    '&enableStreaming=' + enableStreaming +\n                    '&autoRecoverError=' + autoRecoverError +\n                    '&enableWorker=' + enableWorker +\n                    '&dumpfMP4=' + dumpfMP4 +\n                    '&levelCapping=' + levelCapping +\n                    '&defaultAudioCodec=' + defaultAudioCodec;\n  let description = 'permalink: ' + '<a href=\"' + hlsLink + '\">' + hlsLink + '</a>';\n  $('#StreamPermalink').html(description);\n}\n\nfunction createfMP4(type) {\n  if (fmp4Data[type].length) {\n    let blob = new Blob([arrayConcat(fmp4Data[type])], {\n      type: 'application/octet-stream'\n    });\n    let filename = type + '-' + new Date().toISOString() + '.mp4';\n    saveAs(blob, filename);\n    //$('body').append('<a download=\"hlsjs-' + filename + '\" href=\"' + window.URL.createObjectURL(blob) + '\">Download ' + filename + ' track</a><br>');\n  }\n}\n\nfunction arrayConcat(inputArray) {\n  let totalLength = inputArray.reduce( function(prev, cur) { return prev+cur.length; }, 0);\n  let result = new Uint8Array(totalLength);\n  let offset = 0;\n  inputArray.forEach(function(element) {\n    result.set(element, offset);\n    offset += element.length;\n  });\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demo/index.js","module.exports = {\"arte\":{\"url\":\"https://video-dev.github.io/streams/test_001/stream.m3u8\",\"description\":\"ARTE China,ABR\",\"live\":false,\"abr\":true},\"bigBuckBunny480p\":{\"url\":\"https://video-dev.github.io/streams/x36xhzz/url_6/193039199_mp4_h264_aac_hq_7.m3u8\",\"description\":\"big buck bunny,480p\",\"live\":false,\"abr\":false,\"blacklist_ua\":[\"internet explorer\"]},\"deltatreDAI\":{\"url\":\"https://video-dev.github.io/streams/dai-discontinuity-deltatre/manifest.m3u8\",\"description\":\"Ad-insertion in event stream\",\"live\":false,\"abr\":false,\"blacklist_ua\":[\"internet explorer\"]},\"issue666\":{\"url\":\"http://www.streambox.fr/playlists/cisq0gim60007xzvi505emlxx.m3u8\",\"description\":\"hls.js/issues/666\",\"live\":false,\"abr\":false,\"blacklist_ua\":[\"internet explorer\"]},\"issue649\":{\"url\":\"http://cdn3.screen9.com/media/c/W/cW87csHkxsgu5TV1qs78aA_auto_hls.m3u8?auth=qlUjeCtbVdtkDfZYrtveTIVUXX1yuSqgF8wfWabzKpX72r-d5upW88-FHuyRRdnZA_1PKRTGAtTt_6Z-aj22kw\",\"description\":\"hls.js/issues/649\",\"live\":false,\"abr\":false},\"nasa\":{\"url\":\"https://nasa-i.akamaihd.net/hls/live/253565/NASA-NTV1-Public/master.m3u8\",\"description\":\"NASA live stream\",\"live\":true,\"abr\":false,\"blacklist_ua\":[\"internet explorer\",\"safari\"]},\"closedcaptions\":{\"url\":\"http://playertest.longtailvideo.com/adaptive/captions/playlist.m3u8\",\"description\":\"CNN special report, with CC\",\"live\":false,\"abr\":false,\"blacklist_ua\":[\"safari\"]},\"oceans_aes\":{\"url\":\"http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes.m3u8\",\"description\":\"AES encrypted,ABR\",\"live\":false,\"abr\":true},\"bbb_aes\":{\"url\":\"http://streambox.fr/playlists/sample_aes/index.m3u8\",\"description\":\"SAMPLE-AES encrypted\",\"live\":false,\"abr\":false},\"mp3\":{\"url\":\"https://player.webvideocore.net/CL1olYogIrDWvwqiIKK7eLBkzvO18gwo9ERMzsyXzwt_t-ya8ygf2kQBZww38JJT/8i4vvznv8408.m3u8\",\"description\":\"MP3 VOD demo\",\"live\":false,\"abr\":false,\"blacklist_ua\":[\"safari\"]},\"mpeg_audio\":{\"url\":\"https://pl.streamingvideoprovider.com/mp3-playlist/playlist.m3u8\",\"description\":\"MPEG Audio Only demo\",\"live\":false,\"abr\":false,\"blacklist_ua\":[\"internet explorer\",\"MicrosoftEdge\",\"safari\",\"firefox\"]},\"fmp4\":{\"url\":\"https://storage.googleapis.com/shaka-demo-assets/angel-one-hls/hls.m3u8\",\"description\":\"HLS fMP4 Angel One multiple audio tracks\",\"live\":false,\"abr\":false,\"blacklist_ua\":[\"safari\",\"internet explorer\"]},\"fmp4-bitmovin\":{\"url\":\"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s-fmp4/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8\",\"description\":\"HLS fMP4 by Bitmovin\",\"live\":false,\"abr\":true,\"blacklist_ua\":[\"safari\",\"internet explorer\"]}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./tests/functional/streams.json\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}